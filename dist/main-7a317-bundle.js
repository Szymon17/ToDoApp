(()=>{"use strict";class t{constructor(t){this.taskList=t,this.btn=null,this.task=null,this.form={}}createButton(){const t=document.createElement("button");return t.classList.add("editBtn"),t.innerHTML='<i class="far fa-edit"></i>',t.addEventListener("click",(()=>this.editTask())),this.btn=t,t}setEditFormContent(t){this.form.title=t.querySelector(".title-input"),this.form.content=t.querySelector("textarea"),this.form.date=t.querySelector(".date-input"),this.form.title.value=this.task.querySelector("h2").textContent,this.form.content.value=this.task.querySelector(".text").textContent,this.form.date.value=this.task.querySelector(".date").textContent}editTask(){this.task=this.btn.closest(".task");const t=document.querySelector(".user-form").cloneNode(!0),e=this.task.firstChild.cloneNode(!0),s=this.task.querySelector(".buttons");t.querySelector(".addTask").remove(),console.log(t),this.setEditFormContent(t),this.task.textContent="";const a=this._createSaveBtn(e,s),n=this._createCanelBtn(e,s),i=document.createElement("div");i.classList.add("buttons"),i.append(a,n),this.task.append(i,t)}_createSaveBtn(t,e){const s=document.createElement("button");return s.classList.add("saveBtn"),s.innerHTML='<i class="far fa-save"></i>',s.addEventListener("click",function(){this.task.textContent="",this.task.append(t),this.task.querySelector("header .buttons").remove(),this.task.querySelector("header").append(e),this.task.querySelector("h2").textContent=this.form.title.value,this.task.querySelector(".text").textContent=this.form.content.value,this.task.querySelector(".date").textContent=this.form.date.value}.bind(this)),s}_createCanelBtn(t,e){const s=document.createElement("button");return s.classList.add("canelBtn"),s.innerHTML='<i class="fa-solid fa-ban"></i>',s.addEventListener("click",function(){this.task.textContent="",this.task.append(t),this.task.querySelector("header .buttons").remove(),this.task.querySelector("header").append(e)}.bind(this)),s}canelTask(){}}class e{constructor(t){this.taskList=t,this.btn=null}createButton(){const t=document.createElement("button");return t.classList.add("delBtn"),t.innerHTML='<i class="far fa-trash-alt"></i>',t.addEventListener("click",(()=>this.deleteTask(this.taskList))),this.btn=t,t}deleteTask(){const t=this.btn.closest(".task"),e=t.dataset.index;t.remove(),this.taskList.splice(e,1),this.setNewDataIndex()}setNewDataIndex(){document.querySelectorAll(".task-contener .task").forEach(((t,e)=>t.dataset.index=e))}}new class{constructor(){this.app=document.querySelector(".ToDoApp"),this.index=0,this.tasks=[],this.btn=document.querySelector(".addTask"),this.contener=document.querySelector(".task-contener"),this.todayDate=(new Date).toISOString().split("T")[0],this.user_params={title:document.querySelector(".user-form .title-input"),content:document.querySelector(".user-form textarea"),date:document.querySelector(".user-form .date-input")},this.user_params.date.value=this.todayDate,this.bindEvents(),this.isFormActive()}bindEvents(){this.btn.addEventListener("click",this.addTask.bind(this)),document.addEventListener("keypress",(t=>{"Enter"===t.key&&this.addTask()}))}addTask(){if(""==this.user_params.title.value||""==this.user_params.content.value)return void alert("UzupeÅ‚nij pola");const t=this.newHtml();this.contener.append(t),this.tasks.push(t),this.index++,this.user_params.title.value="",this.user_params.content.value="",this.user_params.date.value=this.todayDate,this.setUserFormDeactive()}newHtml(){const s=document.createElement("div");s.classList.add("task"),s.dataset.index=this.tasks.length;const a=document.createElement("div");a.classList.add("contener");const n=document.createElement("header"),i=document.createElement("div");i.classList.add("date"),i.textContent=this.user_params.date.value;const r=document.createElement("div");r.classList.add("buttons");const o=document.createElement("h2");i.classList.add("title"),o.textContent=this.user_params.title.value;const c=document.createElement("text");c.classList.add("text"),c.textContent=this.user_params.content.value;const d=new t(this.tasks),l=new e(this.tasks).createButton(),u=d.createButton();return r.append(u,l),n.append(i,r),a.append(n,o,c),s.append(a),s}setUserFormActive(){this.app.classList.add("active")}setUserFormDeactive(){this.app.classList.remove("active")}isFormActive(){const t=document.querySelector(".user-form");this.user_params.title.addEventListener("click",(()=>this.setUserFormActive())),t.addEventListener("mousedown",(t=>t.stopImmediatePropagation())),document.addEventListener("mousedown",(()=>this.setUserFormDeactive()))}}})();